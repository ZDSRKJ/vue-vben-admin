var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var z=(e,n,f)=>n in e?Z(e,n,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[n]=f,d=(e,n)=>{for(var f in n||(n={}))ne.call(n,f)&&z(e,f,n[f]);if(E)for(var f of E(n))se.call(n,f)&&z(e,f,n[f]);return e},G=(e,n)=>ee(e,te(n));import{c as N,u as a,d as oe,G as re,n as ae,l as g,i as le,z as ie,ac as H,E as ce}from"./vue-ea98dac5.js";import{c as J}from"./componentMap-c31055d0.js";import{l as Y,n as x,z as U,c as ue,a8 as de,a9 as fe,aa as me}from"./index.js";import{i as Q}from"./isNumber-6e063d5c.js";import{i as q}from"./isBoolean-e59585aa.js";import{q as $,E as he,y as pe}from"./antd-168c158e.js";function be(e){return"slot"in e}function ge(e){return!be(e)}const{t:W}=Y();function K(e){return e.includes("Input")||e.includes("Complete")?W("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?W("common.chooseText"):""}const Pe=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Ce(){return[...Pe,"RangePicker"]}function ye(e,n,f){Reflect.has(e,"type")||(["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(n)?e.type=f?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(n)?e.type="array":["InputNumber"].includes(n)&&(e.type="number"))}function je(e,n){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&n&&Q(n)?`${n}`:n}const De=Ce(),Le=["Input","InputPassword","InputSearch","InputTextArea"],xe=["Upload","ApiTransfer","ApiTree","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup","ImageUpload","ApiSelect"];function Ae(e,n){return N(()=>{const f=a(e),{labelCol:M={},wrapperCol:j={}}=f.itemProps||{},{labelWidth:D,disabledLabelWidth:p}=f,{labelWidth:A,labelCol:k,wrapperCol:L,layout:v}=a(n);if(!A&&!D&&!k||p)return M.style={textAlign:"left"},{labelCol:M,wrapperCol:j};let C=D||A;const F=d(d({},k),M),V=d(d({},L),j);return C&&(C=Q(C)?`${C}px`:C),{labelCol:d({style:{width:C}},F),wrapperCol:d({style:{width:v==="vertical"?"100%":`calc(100% - ${C})`}},V)}})}function B(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!le(e)}const Fe=oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:n}){const{t:f}=Y(),{schema:M,formProps:j}=re(e),D=Ae(M,j),p=N(()=>{const{allDefaultValues:s,formModel:t,schema:l}=e,{mergeDynamicData:i}=e.formProps;return{field:l.field,model:t,values:d(d(d({},i),s),t),schema:l}}),A=N(()=>{var r;const{schema:s,tableAction:t,formModel:l,formActionType:i}=e;let{componentProps:o={}}=s;return x(o)&&(o=(r=o({schema:s,tableAction:t,formModel:l,formActionType:i}))!=null?r:{}),s.component==="Divider"&&(o=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},o)),o}),k=N(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:l=!1}=a(A);let i=!!s||l;return q(t)&&(i=t),x(t)&&(i=t(a(p))),i});function L(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:l}=e.formProps,i=l&&q(e.isAdvanced)?e.isAdvanced:!0;let o=!0,r=!0;return q(s)&&(o=s),q(t)&&(r=t),x(s)&&(o=s(a(p))),x(t)&&(r=t(a(p))),o=o&&i,{isShow:o,isIfShow:r}}function v(){var R;const{rules:s=[],component:t,rulesMessageJoinLabel:l,label:i,dynamicRules:o,required:r}=e.schema;if(x(o))return o(a(p));let c=ue(s);const{rulesMessageJoinLabel:S}=e.formProps,y=(Reflect.has(e.schema,"rulesMessageJoinLabel")?l:S)?i:"",b=t?K(t)+y:y;function m(h,u){const P=h.message||b;return u===void 0||fe(u)||Array.isArray(u)&&u.length===0||typeof u=="string"&&u.trim()===""||typeof u=="object"&&Reflect.has(u,"checked")&&Reflect.has(u,"halfChecked")&&Array.isArray(u.checked)&&Array.isArray(u.halfChecked)&&u.checked.length===0&&u.halfChecked.length===0?Promise.reject(P):Promise.resolve()}const T=x(r)?r(a(p)):r;T&&(!c||c.length===0?c=[{required:T,validator:m}]:c.findIndex(u=>Reflect.has(u,"required"))===-1&&c.push({required:T,validator:m}));const O=c.findIndex(h=>Reflect.has(h,"required")&&!Reflect.has(h,"validator"));if(O!==-1){const h=c[O],{isShow:u}=L();if(u||(h.required=!1),t){h.message=h.message||b,(t.includes("Input")||t.includes("Textarea"))&&(h.whitespace=!0);const P=(R=a(A))==null?void 0:R.valueFormat;ye(h,t,P)}}const I=c.findIndex(h=>h.max);return I!==-1&&!c[I].validator&&(c[I].message=c[I].message||f("component.form.maxTip",[c[I].max])),c}function C(){var h;if(!ge(e.schema))return null;const{renderComponentContent:s,component:t,field:l,changeEvent:i="change",valueField:o}=e.schema,r=t&&["Switch","Checkbox"].includes(t),c=`on${me(i)}`,S={[c]:(...u)=>{const[P]=u;m[c]&&m[c](...u);const _=P?P.target:null,X=_?r?_.checked:_.value:P;e.setFormModel(l,X,e.schema)}},w=J.get(t),{autoSetPlaceHolder:y,size:b}=e.formProps,m=G(d({allowClear:!0,size:b},a(A)),{disabled:a(k)});!m.disabled&&y&&t!=="RangePicker"&&t&&(m.placeholder=((h=a(A))==null?void 0:h.placeholder)||K(t)),m.codeField=l,m.formValues=a(p);const O={[o||(r?"checked":"value")]:e.formModel[l]},I=d(d(d({},m),S),O);if(!s)return g(w,I,null);const R=x(s)?d({},s(a(p),{disabled:a(k)})):{default:()=>s};return g(w,I,B(R)?R:{default:()=>[R]})}function F(){const{label:s,helpMessage:t,helpComponentProps:l,subLabel:i}=e.schema,o=i?g("span",null,[s,ce(" "),g("span",{class:"text-secondary"},[i])]):s,r=x(t)?t(a(p)):t;return!r||Array.isArray(r)&&r.length===0?o:g("span",null,[o,g(de,H({placement:"top",class:"mx-1",text:r},l),null)])}function V(){const{itemProps:s,slot:t,render:l,field:i,suffix:o,component:r}=e.schema,{labelCol:c,wrapperCol:S}=a(D),{colon:w}=e.formProps,y={disabled:a(k)};if(r==="Divider"){let b;return g($,{span:24},{default:()=>[g(he,a(A),B(b=F())?b:{default:()=>[b]})]})}else{const b=()=>t?U(n,t,a(p),y):l?l(a(p),y):C(),m=!!o,T=x(o)?o(a(p)):o;return r&&xe.includes(r)&&e.schema&&(e.schema.itemProps=d({autoLink:!1},e.schema.itemProps)),g(pe.Item,H({name:i,colon:w,class:{"suffix-item":m}},s,{label:F(),rules:v(),labelCol:c,wrapperCol:S}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[b()]),m&&g("span",{class:"suffix"},[T])])]})}}return()=>{let s;const{colProps:t={},colSlot:l,renderColContent:i,component:o,slot:r}=e.schema;if(!o||!J.has(o)&&!r)return null;const{baseColProps:c={}}=e.formProps,S=d(d({},c),t),{isIfShow:w,isShow:y}=L(),b=a(p),m={disabled:a(k)};return w&&ae(g($,S,B(s=(()=>l?U(n,l,b,m):i?i(b,m):V())())?s:{default:()=>[s]}),[[ie,y]])}}});export{Fe as _,Le as a,De as d,je as h};
